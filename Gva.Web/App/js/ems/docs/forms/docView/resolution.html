<ng-form class="form-inline" sc-validate="{}">
  resoluziq
  <accordion close-others="false">
    <accordion-group is-open="(model.docUnitsFrom.length > 0) || (model.docUnitsImportedBy.length > 0) || (model.docUnitsInCharge.length > 0) || (model.docUnitsControlling.length > 0) || !!model.assignmentType || !!model.assignmentDate || !!model.assignmentDeadline" ng-if="readonly || (model.docUnitsFrom.length > 0) || (model.docUnitsImportedBy.length > 0) || (model.docUnitsInCharge.length > 0) || (model.docUnitsControlling.length > 0) || !!model.assignmentType || !!model.assignmentDate || !!model.assignmentDeadline">
      <accordion-heading>
          <a l10n-text="docs.edit.view.assignment" style="font-size: 12px;"></a>
      </accordion-heading>
      <div class="row">
        <div class="form-group col-md-6" sc-has-error="docUnitsFrom">
          <label class="control-label" l10n-text="docs.edit.view.docUnitsFrom"></label>
          <sc-validation-error field-name="docUnitsFrom" validations="{required: null, requiredValue: 'Задължително поле'}"></sc-validation-error>
          <div class="input-group input-group-sm">
            <sc-nomenclature name="docUnitsFrom" ng-model="model.docUnitsFrom" alias="'unit'" multiple="multiple" sc-validate="{ requiredValue: requireDocUnitsFrom }" required ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'from' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.importedBy"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsImportedBy" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'importedBy' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-6" sc-has-error="docUnitsInCharge">
          <label class="control-label" l10n-text="docs.edit.view.inCharge"></label>
          <sc-validation-error field-name="docUnitsInCharge" validations="{required: null, requiredValue: 'Задължително поле'}"></sc-validation-error>
          <div class="input-group input-group-sm">
            <sc-nomenclature name="docUnitsInCharge" ng-model="model.docUnitsInCharge" alias="'unit'" multiple="multiple" sc-validate="{ requiredValue: requireDocUnitsInCharge }" required ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'inCharge' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>

        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.controlling"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsControlling" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'controlling' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
      </div>

      <div class="row" style="margin-bottom: 5px;">
        <div class="form-group col-md-3" sc-has-error="assignmentType">
          <label class="control-label" l10n-text="docs.edit.view.assignmentType"></label>
          <sc-validation-error field-name="assignmentType" validations="{required: null}"></sc-validation-error>
          <sc-nomenclature name="assignmentType" ng-model="model.assignmentType" alias="'assignmentType'" required ng-readonly="!readonly"></sc-nomenclature>
        </div>

        <div class="form-group col-md-2">
          <label class="control-label" l10n-text="docs.edit.view.assignmentDate"></label>
          <sc-date name="assignmentDate" ng-model="model.assignmentDate" ng-readonly="!readonly"></sc-date>
        </div>

        <div class="form-group col-md-2" sc-has-error="assignmentDeadline">
          <label class="control-label" l10n-text="docs.edit.view.assignmentDeadline"></label>
          <sc-validation-error field-name="assignmentDeadline" validations="{required: null}"></sc-validation-error>
          <sc-date name="assignmentDeadline" ng-model="model.assignmentDeadline" required ng-readonly="!readonly"></sc-date>
        </div>
      </div>
    </accordion-group>

    <accordion-group is-open="(model.docUnitsCCopy.length > 0) || (model.docUnitsRoleReaders.length > 0) || (model.docUnitsEditors.length > 0) || (model.docUnitsRoleRegistrators.length > 0)" ng-if="readonly || (model.docUnitsCCopy.length > 0) || (model.docUnitsRoleReaders.length > 0) || (model.docUnitsEditors.length > 0) || (model.docUnitsRoleRegistrators.length > 0)">
      <accordion-heading>
          <a l10n-text="docs.edit.view.permissions" style="font-size: 12px;"></a>
      </accordion-heading>
      <div class="row" style="margin-bottom: 5px;">
        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.readers"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsRoleReaders" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'roleReaders' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.editors"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsEditors" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'editors' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
      </div>
      <div class="row" style="margin-bottom: 5px;">
        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.cCopy"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsCCopy" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'cCopy' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
        <div class="form-group col-md-6">
          <label class="control-label" l10n-text="docs.edit.view.registrators"></label>
          <div class="input-group input-group-sm">
            <sc-nomenclature ng-model="model.docUnitsRoleRegistrators" alias="'unit'" multiple="multiple" ng-readonly="!readonly"></sc-nomenclature>
            <span class="input-group-btn">
              <sc-button btn-click="$raise('scOnSelectUnit', { type: 'registrators' })" class="btn btn-default" icon="glyphicon glyphicon-search" ng-disabled="!readonly"></sc-button>
            </span>
          </div>
        </div>
      </div>
    </accordion-group>

    <accordion-group is-open="!!model.docBody" ng-if="readonly || !!model.docBody">
      <accordion-heading>
          <a l10n-text="docs.edit.view.text" style="font-size: 12px;"></a>
      </accordion-heading>
      <div class="row">
        <div class="col-md-12" style="margin-bottom: 5px;">
          <sc-textarea rows="2" ng-model="model.docBody" ng-readonly="!readonly"></sc-textarea>
        </div>
      </div>
    </accordion-group>

    <accordion-group is-open="model.docFiles.length > 0" ng-if="readonly || model.docFiles.length > 0">
      <accordion-heading>
          <a l10n-text="docs.edit.view.content" style="font-size: 12px;"></a>
      </accordion-heading>

      <div ng-if="!readonly">
        <div class="row">
          <div class="form-group col-md-12">
            <label class="control-label">Вътрешни файлове</label>
            <div class="input-group input-group-sm">
              <span ng-repeat="df in model.docFiles | filter: { docFileKindId: 1}">
                <i style="color:#428bca; margin-left:5px;" class="fa fa-file"></i> 
                <span>{{df.name}} </span> (<a ng-href="{{df.docFileUrl}}" target="_blank"><span>{{ df.docFile.name }}</span></a>)
              </span>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-md-12">
            <label class="control-label">Публични файлове</label>
            <div class="input-group input-group-sm">
              <span ng-repeat="df in model.docFiles | filter: { docFileKindId: 2}">
                <i style="color:#428bca; margin-left:5px;" class="fa fa-file"></i> 
                <span>{{df.name}} </span> (<a ng-href="{{df.docFileUrl}}" target="_blank"><span>{{ df.docFile.name }}</span></a>)
              </span>
            </div>
          </div>
        </div>
      </div>

      <ems-doc-view-doc-files name="docFilesForm" ng-model="model" readonly="readonly" ng-if="readonly"></ems-doc-view-doc-files>
    </accordion-group>

    <accordion-group is-open="model.docClassifications.length > 0" ng-if="readonly || model.docClassifications.length > 0">
      <accordion-heading>
          <a l10n-text="docs.edit.classifications.name" style="font-size: 12px;"></a>
      </accordion-heading>

      <ems-doc-view-doc-classification name="docClassificationForm" ng-model="model" readonly="readonly"></ems-doc-view-doc-classification>
    </accordion-group>

  </accordion>
</ng-form>
