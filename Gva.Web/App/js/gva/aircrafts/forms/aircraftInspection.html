<ng-form  class="form-inline" sc-validate="{}">
  <div class="panel panel-default">
    <div class="panel-heading"><strong l10n-text="aircrafts.inspectionDirective.title"></strong></div>
    <div class="well-sm panel-body">
      <div class="row">
        <div class="form-group col-sm-3 col-md-2">
          <label class="control-label" l10n-text="aircrafts.inspectionDirective.documentNumber"></label>
          <sc-text ng-model="model.part.documentNumber" name="documentNumber"></sc-text>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-2" sc-has-error="auditReason">
          <label class="control-label" l10n-text="aircrafts.inspectionDirective.auditReason"></label>
          <sc-validation-error field-name="auditReason" validations="{required: null}"></sc-validation-error>
          <sc-nomenclature ng-model="model.part.auditReason" name="auditReason" alias="'auditReasons'" ng-required="true"></sc-nomenclature>
        </div>
        <div class="form-group col-sm-2" sc-has-error="auditType">
          <label class="control-label" l10n-text="aircrafts.inspectionDirective.auditType"></label>
          <sc-validation-error field-name="auditType" validations="{required: null}"></sc-validation-error>
          <sc-nomenclature ng-model="model.part.auditType" name="auditType" alias="'auditTypes'" ng-required="true"></sc-nomenclature>
        </div>
        <div class="form-group col-sm-2" sc-has-error="auditState">
          <label class="control-label" l10n-text="aircrafts.inspectionDirective.auditState"></label>
          <sc-validation-error field-name="auditState" validations="{required: null}"></sc-validation-error>
          <sc-nomenclature ng-model="model.auditState" name="auditState" alias="'auditStates'" ng-required="true"></sc-nomenclature>
        </div>
      </div>
      <div class="row">
        <div class="form-group col-sm-6 col-md-6" sc-has-error="subject">
          <label class="control-label" l10n-text="aircrafts.inspectionDirective.subject"></label>
          <sc-validation-error field-name="subject" validations="{required: null}"></sc-validation-error>
          <sc-textarea rows="3" cols="50" ng-model="model.subject" name="subject" ng-required="true"></sc-textarea>
        </div>
      </div>
      <div class="row" sc-has-error="notification">
        <div class="form-group  col-sm-6 col-md-6">
            <label class="control-label col-md-9 col-sm-4" l10n-text="aircrafts.inspectionDirective.notification" style="margin-left:-15px"></label>
            <sc-validation-error field-name="notification" validations="{required: null}"></sc-validation-error>
          <div class="col-sm-4 pull-right" style="margin-right:-15px">
            <sc-nomenclature  ng-model="model.notification" name="notification" alias="'boolean'" ng-required="true"></sc-nomenclature>
          </div>
        </div>
      </div>
      <div class="row">
         <div class="form-group  col-sm-6 col-md-6">
          <label class="control-label  col-sm-7 -md-8" l10n-text="aircrafts.inspectionDirective.inspectionFrom" style="margin-right:-25px; margin-left:-15px"></label>
          <sc-date class="col-sm-4 pull-right col-md-3" ng-model="model.inspectionFrom" ></sc-date>
        </div>
      </div>
      <div class="form-group row">
        <div class="form-group  col-sm-6 col-md-6">
          <label class="control-label col-sm-7 col-md-8" l10n-text="aircrafts.inspectionDirective.inspectionTo" style="margin-right:-25px; margin-left:-15px"></label>
          <sc-date class="col-sm-4 pull-right col-md-3" ng-model="model.inspectionTo"></sc-date>
        </div>
      </div>

      <div class="row col-sm-12 col-md-12" style="padding-top:10px;">
        <div class="panel panel-default">
          <div class="panel-heading"><strong l10n-text="aircrafts.inspectionDirective.auditAddress"></strong></div>
            <div class="well-sm panel-body">
              <div class="row">
                <div class="form-group col-sm-6 col-md-4" sc-has-error="inspectionPlace">
                  <label class="control-label" l10n-text="aircrafts.inspectionDirective.inspectionPlace"></label>
                  <sc-validation-error field-name="inspectionPlace" validations="{required: null}"></sc-validation-error>
                  <sc-text ng-model="model.inspectionPlace" name="inspectionPlace" ng-required="true"></sc-text>
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-3 col-md-2" sc-has-error="startDate">
                  <label class="control-label" l10n-text="aircrafts.inspectionDirective.startDate"></label>
                  <sc-validation-error field-name="startDate" validations="{required: null}"></sc-validation-error>
                  <sc-date ng-model="model.startDate" name="startDate" ng-required="true"></sc-date>
                </div>
                <div class="form-group col-sm-3 col-md-2">
                  <label class="control-label" l10n-text="aircrafts.inspectionDirective.endDate"></label>
                  <sc-date ng-model="model.endDate"></sc-date>
                </div>
              </div>
            </div>
        </div>
        
        <div class="panel panel-default">
          <div class="panel-heading"><strong l10n-text="aircrafts.inspectionDirective.ascertainmentsTable.title"></strong></div>
            <div class="well-sm panel-body">
              <sc-button btn-click="insertAscertainments()" ng-if="!model.auditDetails.length" text="aircrafts.inspectionDirective.insertAscertainments" class="btn btn-default"></sc-button>
              <table class="table table-striped table-bordered"  ng-if="model.auditDetails.length > 0" >
                <thead>
                  <tr>
                    <th l10n-text="aircrafts.inspectionDirective.ascertainmentsTable.code"></th>
                    <th l10n-text="aircrafts.inspectionDirective.ascertainmentsTable.subject"></th>
                    <th l10n-text="aircrafts.inspectionDirective.ascertainmentsTable.conclusion"></th>
                    <th l10n-text="aircrafts.inspectionDirective.ascertainmentsTable.disparity"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="detail in model.auditDetails">
                    <td style="width: 10px;">
                      {{detail.code}}
                    </td>
                    <td class="col-sm-4 col-md-3">
                      {{detail.subject.name}}
                    </td>
                    <td class="col-sm-4 col-md-3">
                      <sc-nomenclature ng-model="detail.auditResult" alias="'auditResults'"></sc-nomenclature>
                    </td>
                    <td class="row">
                      <sc-button name="addDisparityBtn" type="button" btn-click="addDisparity(detail)" class="btn btn-primary btn-sm pull-right" icon="glyphicon-plus" 
                         ng-show="detail.auditResult.code === '3' || detail.auditResult.code === '4'">
                      </sc-button>
                      <div class="nav-pills pull-left" ng-repeat="detail in detail.disparitiesList">
                          <a href="" scroll-to=".disparity{{detail}}">
                            <span class="badge pull-right">{{detail}}</span>
                          </a>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
        </div>
        <div class="panel panel-default ">
          <div class="panel-heading"><strong l10n-text="aircrafts.inspectionDirective.disparitiesTable.disparitiesTitle"></strong></div>
            <div class="well-sm panel-body">
              <table class="table table-striped table-bordered">
                <thead>
                  <tr>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.sortOrder"></th>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.subject"></th>
                    <th>
                      <div sc-has-error="refNumber"  class="col-sm-1 col-md-1">
                        <label class="control-label" l10n-text="aircrafts.inspectionDirective.disparitiesTable.refNumber"></label>
                        <sc-validation-error field-name="refNumber" validations="{required: null}"></sc-validation-error>
                      </div>
                    </th>
                    <th>
                      <div sc-has-error="description">
                        <label class="control-label" l10n-text="aircrafts.inspectionDirective.disparitiesTable.description"></label>
                        <sc-validation-error field-name="description" validations="{required: null}"></sc-validation-error>
                      </div>
                    </th>
                    <th>
                      <div sc-has-error="disparityLevel">
                        <label class="control-label" l10n-text="aircrafts.inspectionDirective.disparitiesTable.disparityLevel"></label>
                        <sc-validation-error field-name="disparityLevel" validations="{required: null}"></sc-validation-error>
                      </div>
                    </th>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.removalDate"></th>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.rectifyAction"></th>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.closureDate"></th>
                    <th l10n-text="aircrafts.inspectionDirective.disparitiesTable.closureDocument"></th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="disparity in model.disparities" class="disparity{{disparity.sortOrder}}">
                    <td style="width: 10px;">
                      <sc-int ng-model="disparity.sortOrder" ng-change="changedSortOrder(disparity)"  ng-focus="saveSortOrderOldValue(disparity)" ng-blur="deleteSortOrderOldValue(disparity)"></sc-int>
                    </td>
                    <td class="col-sm-1 col-md-1">
                      {{disparity.subject.name}}
                    </td>
                    <td class="col-sm-2 col-md-2">
                      <sc-text ng-model="disparity.refNumber" name="refNumber"  ng-required="true"></sc-text>
                    </td>
                    <td>
                      <sc-text ng-model="disparity.description" name="description" ng-required="true"></sc-text>
                    </td>
                    <td>
                      <sc-nomenclature class="col-sm-1 col-md-1" ng-model="disparity.disparityLevel" name="disparityLevel" alias="'disparityLevels'" ng-required="true"></sc-nomenclature>
                    </td>
                    <td>
                      <sc-date ng-model="disparity.removalDate"></sc-date>
                    </td>
                    <td>
                      <sc-text ng-model="disparity.rectifyAction"></sc-text>
                    </td>
                    <td>
                      <sc-date ng-model="disparity.closureDate"></sc-date>
                    </td>
                    <td>
                      <sc-text ng-model="disparity.closureDocument"></sc-text>
                    </td>
                    <td>
                      <sc-button name="deleteDisparityBtn" type="button" btn-click="deleteDisparity(disparity)" class="btn btn-primary btn-sm" icon="glyphicon-remove"></sc-button>
                    </td>
                  </tr>
                  <tr class="sort-disabled" ng-if="!model.disparities.length">
                    <td colspan="8" class="text-center" l10n-text="aircrafts.inspectionDirective.disparitiesTable.noAvailableDisparities"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="panel panel-default">
            <div class="panel-heading"><strong l10n-text="aircrafts.inspectionDirective.examinersTable.examinersTitle"></strong></div>
              <div class="well-sm panel-body">
                <table class="table table-striped table-bordered">
                  <thead>
                    <tr>
                      <th l10n-text="aircrafts.inspectionDirective.examinersTable.sortOrder"></th>
                      <th ng-class="{'has-error': model.examiners.length === 0}">
                        <div sc-has-error="checker" >
                          <label class="control-label" l10n-text="aircrafts.inspectionDirective.examinersTable.checker"></label>
                          <sc-validation-error field-name="checker" validations="{required: null}"></sc-validation-error>
                        </div>
                      </th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat-start="examiner in model.examiners">
                      <td class="col-sm-1 col-md-1">
                        <sc-int ng-model="examiner.sortOrder"></sc-int>
                      </td>
                      <td>
                        <sc-nomenclature ng-model="examiner.checker" name="checker" ng-required="true && model.partIndex" alias="'checkers'"></sc-nomenclature>
                      </td>
                      <td style="text-align: right; width: 1px;">
                        <sc-button name="deleteExaminerBtn" type="button" class="btn btn-primary btn-sm" btn-click="deleteExaminer(examiner)" icon="glyphicon-remove"></sc-button>
                      </td>
                    </tr>
                    <tr ng-repeat-end></tr>
                    <tr class="sort-disabled" ng-if="!model.examiners.length">
                      <td colspan="8" class="text-center" l10n-text="aircrafts.inspectionDirective.examinersTable.noAvailableExaminers"></td>
                    </tr>
                    <tr>
                      <td colspan="4" style="text-align: right; width: 1px;">
                        <sc-button name="addExaminerBtn" type="button" btn-click="addExaminer()" class="btn btn-primary btn-sm" icon="glyphicon-plus"></sc-button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row"></div>
</ng-form>
